<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>learn axios</title>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!--<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>-->
</head>
<body>
<div id="app">
    {{info}}
    <!--<div v-for="(item, i) in info">-->
    <!--{{i}}-&#45;&#45;{{item}}-->
    <!--</div>-->

    <input type="button" value="get请求" @click="getInfo">
    <input type="button" value="post请求" @click="postInfo">
    <input type="button" value="请求" @click="requestInfo">
</div>
<script>
    var vm = new Vue({
        el: '#app',
        data: {
            msg: 'XBB',
            info: null
        },
        methods: {
            //vue-resource 的相关方法
            // getInfo() {
            //     this.$http
            //     .get('ajax_info.txt')
            //     .then(function (result) {
            //         //请求成功的回调
            //         console.log(result);
            //     }, function () {
            //         //请求失败的回调 不是必须的
            //     })
            // },
            // postInfo() {
            //     //手动发起的POST请求默认没有表单格式
            //     //有的服务器处理不了
            //     this.$http.post('demo_axios_post.php', {}, {emulateJSON: true}).then(result => {
            //         console.log(result.body);
            //     })
            // },
            // jsonpInfo() {
            //     this.$http.jsonp('http://vue.studyit.io/api/jsonp').then(res => {
            //         console.log(res);
            //     })
            // }
            //貌似可以弃用了。。。
            //****************************
            //axios 的相关方法
            getInfo() {
                axios
                    .get('json_demo.json', {
                        params: {
                            SID: 'XBB'
                        }
                    })
                    .then(res => {
                        //传入的res已经是JSON转化后的对象
                        console.log(JSON.stringify(res));
                        this.info = res.data
                    })
                    .catch(error => console.log(error))
            },
            postInfo() {
                // let newdata =  {
                //     id: '2',
                //     name: '华晨宝马'
                // }
                // axios
                //     .post('demo_axios_post.php', newdata)
                //     .then(res => {
                //         console.log(res);
                //         this.info = res
                //     })
                //     .catch(function (error) {
                //         console.log(error);
                //     })
                //另一种方式
                // axios({
                //     method: 'post',
                //     url: 'http://api.komavideo.com/news/list',
                //     data: {
                //         id: '2',
                //         name: 'Fred'
                //     }
                // }).then(res => console.log(res));
                axios.post('https://www.easy-mock.com/mock/5d285a292b88e21970e06f77/example/upload', {
                    SID: 123456
                })
                    .then(function (response) {
                        console.log(response);
                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },
            requestInfo() {
                axios({
                    method: 'head',
                    url: 'demo_axios_post.php'
                }).then(res => console.log(res))
            }
        }
    })
</script>
</body>
</html>